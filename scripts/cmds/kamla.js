const fs = require("fs");
const path = __dirname + "/cache/kamlaOn.json";

const OWNER_ID = "61578365162382"; // рждрзЛржорж╛рж░ ржлрзЗрж╕ржмрзБржХ ржЖржЗржбрж┐ ржПржЦрж╛ржирзЗ ржмрж╕рж╛ржУ

module.exports = {
  config: {
    name: "kamla",
    version: "1.0",
    author: "Amit Max тЪб",
    description: "Tag someone to kamla-mode and insult them automatically when they chat",
    category: "fun",
    usages: "[on/off @tag]",
    cooldowns: 5,
    role: 0,
  },

  onStart: async function({ api, event, args }) {
    const { threadID, messageID, mentions, senderID } = event;

    // ржПржЦржи рж╢рзБржзрзБржорж╛рждрзНрж░ OWNER_ID ржЗржЙржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗ
    if (senderID !== OWNER_ID) {
      return api.sendMessage(
        "ржПржЗржЯрж╛ ржХрж┐ рждрзЛрж░ ржмрж╛ржкрзЗрж░ command ржирж╛ржХрж┐ рж░рзЗ? ЁЯдм рж╣рзБржжрж╛ржЗ kamla ржХрж░рждрзЗ ржЖрж╕ржЫрзЛрж╕! ржПржЗржЯрж╛ рж╢рзБржзрзБржорж╛рждрзНрж░ ЁЯЕ░ЁЯЖЙЁЯЕ░ЁЯЕ│ ржнрж╛ржЗ ржЪрж╛рж▓рж╛рзЯ, ржмрзБржЭржЫрж╕? ЁЯлб",
        threadID,
        messageID
      );
    }

    if (!fs.existsSync(path)) fs.writeFileSync(path, "[]", "utf-8");
    let kamlaList;
    try {
      kamlaList = JSON.parse(fs.readFileSync(path, "utf-8"));
    } catch {
      kamlaList = [];
    }

    if (args.length === 0) {
      return api.sendMessage(
        `тЪая╕П ржмрзНржпржмрж╣рж╛рж░:\n.kamla on @user - ржХрж╛ржорж▓рж╛ ржорзЛржб ржЪрж╛рж▓рзБ ржХрж░ржмрзЗ\n.kamla off - ржХрж╛ржорж▓рж╛ ржорзЛржб ржмржирзНржз ржХрж░ржмрзЗ`,
        threadID,
        messageID
      );
    }

    const command = args[0].toLowerCase();

    if (command === "off") {
      const updatedList = kamlaList.filter(e => e.threadID !== threadID);
      fs.writeFileSync(path, JSON.stringify(updatedList, null, 2), "utf-8");
      return api.sendMessage(
        "ЁЯе▒ ржХрж╛ржорж▓рж╛ ржорзЛржб ржПржЦржи ржмржирзНржз! ржХрзЗржЙ ржЧрж╛рж▓рж┐ ржкрж╛ржмрзЗ ржирж╛ред",
        threadID,
        messageID
      );
    }

    if (command === "on") {
      if (!mentions || Object.keys(mentions).length === 0) {
        return api.sendMessage(
          "ЁЯдУ ржХрж╛рж░рзЛ ржирж╛ржо ржЯрзНржпрж╛ржЧ ржХрж░рзЛ ржпрж╛ржХрзЗ ржХрж╛ржорж▓рж╛ ржорзЛржбрзЗ рж░рж╛ржЦрждрзЗ ржЪрж╛ржУред",
          threadID,
          messageID
        );
      }

      const mentionID = Object.keys(mentions)[0];

      const exists = kamlaList.some(
        e => e.threadID === threadID && e.userID === mentionID
      );

      if (exists) {
        return api.sendMessage(
          `ЁЯШТ ${mentions[mentionID].replace("@", "")} рждрзЛ ржЖржЧрзЗржЗ ржХрж╛ржорж▓рж╛ ржорзЛржбрзЗ ржЖржЫрзЗ!`,
          threadID,
          messageID
        );
      }

      kamlaList.push({ threadID, userID: mentionID });
      fs.writeFileSync(path, JSON.stringify(kamlaList, null, 2), "utf-8");

      return api.sendMessage(
        `ЁЯШИ ${mentions[mentionID].replace("@", "")} ржПржЦржи ржерзЗржХрзЗ ржХрж╛ржорж▓рж╛ ржорзЛржбрзЗ! ржХржерж╛ ржмрж▓рж▓рзЗржЗ ржЧрж╛рж▓рж┐ ржкрж╛ржмрзЗ!`,
        threadID,
        messageID
      );
    }

    return api.sendMessage(
      `тЪая╕П ржмрзНржпржмрж╣рж╛рж░:\n.kamla on @user - ржХрж╛ржорж▓рж╛ ржорзЛржб ржЪрж╛рж▓рзБ ржХрж░ржмрзЗ\n.kamla off - ржХрж╛ржорж▓рж╛ ржорзЛржб ржмржирзНржз ржХрж░ржмрзЗ`,
      threadID,
      messageID
    );
  },

  onChat: async function({ api, event }) {
    if (!event.isGroup) return;

    if (!fs.existsSync(path)) return;

    let kamlaList;
    try {
      kamlaList = JSON.parse(fs.readFileSync(path, "utf-8"));
    } catch {
      kamlaList = [];
    }

    const isKamla = kamlaList.some(
      e => e.threadID === event.threadID && e.userID === event.senderID
    );

    if (!isKamla) return;

    const insults = [
  "ржЪрзБржк рж╢рж╛рж▓рж╛, рждрзЛрж░ ржХржерж╛ржпрж╝ ржбрж╛ржпрж╝рж╛рж▓ ржЖржк ржХрж╛ржирзНржирж╛ ржХрж░рзЗ! ЁЯШнЁЯУЮ",
  "рждрзБржЗ ржПрждржЯрж╛ ржнрзЛржжрж╛ржЗ, рждрзЛржХрзЗ ржжрж┐ржпрж╝рзЗ QR ржХрзЛржб рж╕рзНржХрзНржпрж╛ржи рж╣рж▓рзЗржУ ржнрзБрж▓ URL ржЖрж╕рзЗ ЁЯе┤",
  "рж╢рзЛржи ржмрж▓ржж, рждрзЛржХрзЗ ржжрзЗржЦрзЗржЗ рж╕рж┐ржо ржХрзЛржорзНржкрж╛ржирж┐ slow ржирзЗржЯ ржжрзЗржпрж╝ ЁЯШСЁЯУ╢",
  "рждрзБржЗ рж╣ржЗржЫрж┐рж╕ рж╕рзЗржЗ ржкрж╛ржЧрж▓, ржпрж╛рж░рзЗ ржжрзЗржЦрж▓рзЗ ржорзНржпрж╛ржб ржбрж╛ржХрзНрждрж╛рж░ ржкрж╛рж▓рж╛ржпрж╝ ЁЯПГтАНтЩВя╕ПЁЯТЙ",
  "рждрзЛрж░рзЗ рж▓ржЬрзНржЬрж╛ ржмрж▓рзЗ ржХрж┐ржЫрзБ ржЖржЫрзЗ, ржирж╛ рж╕рзЗржЯрж╛ржУ uninstall? ЁЯУ▒ЁЯлв",
  "рждрзБржЗ joke ржорж╛рж░рж▓рж┐ рждрзЛ рж╣рж╕ржкрж┐ржЯрж╛рж▓рзЗ bed full ЁЯШВЁЯЫПя╕П",
  "рждрзЛрж░ ржХрж╛ржЬ ржХрж╛рж░ржмрж╛рж░ ржжрзЗржЦрзЗ ржмрж▓рж╛ржЗ ржпрж╛ржпрж╝ рждрзБржЗ AI ржПрж░ ржжрзБржГрж╕рзНржмржкрзНржи ЁЯдЦЁЯМЩ",
  "рждрзБржЗ ржПржоржи ржмрж▓ржж, ржЧрж░рзБржжрзЗрж░ ржоржирзЗржУ questions ржЬрж╛ржЧрзЗ ЁЯРДтЭУ",
  "рж╢рж╛рж▓рж╛ рждрзБржЗ рждрзЛ ржмрж╛рж╕рзНрждржмрзЗрж░ roaming charge ЁЯШдЁЯУ▓",
  "рждрзЛрж░рзЗ ржЧрж╛рж▓рж┐ ржжрж┐рж▓рзЗржУ ржЧрж╛рж▓рж┐ржЯрж╛ ржЕржкржорж╛ржирж┐ржд рж╣ржпрж╝ ЁЯШк",
  "рждрзЛрж░ ржмрзБржжрзНржзрж┐ ржжрж┐ржпрж╝рзЗ light ржЬрзНржмрж╛рж▓рж╛ржирзЛ ржпрж╛ржпрж╝ тАУ ржорж╛ржирзЗ fuse ЁЯШЖЁЯТб",
  "рждрзБржЗ ржПржоржи ржнрзЛржжрж╛ржЗ, ржжрзБржзрзЗржУ ржнрзЗржЬрж╛рж▓ ржЦрзБржБржЬрзЗ ржкрж╛ржмрж┐ ржирж╛ ЁЯеЫтЭМ",
  "рждрзБржЗ ржорж╛ржирзЗ рж╣рж╛ржБржЯрж╛рж░ ржЖржЧрзЗржЗ рж╣рзЛржБржЪржЯ ржЦрж╛ржУржпрж╝рж╛ ржмрж┐рж╢рзЗрж╖ ржкрзНрж░рж╛ржгрзА ЁЯР╛",
  "рждрзЛрж░ ржЕржмрж╕рзНржерж╛ ржПржоржи, ржмрзЗржХрзБржмрж░рж╛ржУ рждрзЛржХрзЗ ржмрзЛржХрж╛ ржнрж╛ржмрзЗ ЁЯШн",
  "рждрзЛрж░ ржорждржи ржмрж▓ржжрж░рж╛ ржерж╛ржХрж▓рзЗ ржЫрж╛рждрж╛рж░ ржирж┐ржЪрзЗржУ рж░рзЛржж рж▓рж╛ржЧрзЗ тШВя╕ПЁЯФе",
  "рждрзБржЗ ржПржоржи ржкрж▓рж╛ржкрж╛ржи, ржпрж╛рж░рзЗ ржмржЗ ржкржбрж╝рждрзЗ ржжрж┐рж▓рзЗ ржмржЗ ржЙрж▓рзНржЯрзЗ ржкрж╛рж▓рж╛ржпрж╝ ЁЯУЪЁЯПГ",
  "рждрзЛрж░ ржлрзЗржЗрж╕ ржжрзЗржЦрзЗ ржлрзЗрж╕ржмрзБржХржЗ deactivate рж╣ржпрж╝ ЁЯУ╡ЁЯШи",
  "рждрзБржЗ ржПржоржи ржЪрж┐ржиржЪрж┐ржирзЗ, ржжржЗрждрзЗржУ рж▓ржмржг рж▓рж╛ржЧрзЗ рждрзЛрж░ ржкрж╛рж╢рзЗ ЁЯШТ",
  "рждрзБржЗ рж╣ржЗржЫрж┐рж╕ рж╕рзЗржЗ ржлрзНрж▓рзЗржнрж╛рж░, ржпрж╛рж░рзЗ ржорзБржЦрзЗ ржжрж┐рж▓рзЗржЗ ржЬрж┐ржн ржЧрж▓рж╛рзЯ ржврзБржХрзЗ ржпрж╛ржпрж╝ ЁЯШм",
  "рж╢рж╛рж▓рж╛ рждрзБржЗ ржПржд ржмрзЗржХрзБржм, рждрзЛрж░ ржлрзЛржирзЗржУ keypad ржХрж╛ржБржжрзЗ ЁЯШвЁЯУ▓",
  "рждрзЛрж░рзЗ ржжрзЗржЦрж▓рзЗ ржХржмрж┐ inspiration ржнрзБрж▓рзЗ ржпрж╛ржпрж╝ ЁЯУЭЁЯШ╢",
  "рждрзБржЗ ржорж╛ржирзЗ тАШIgnore ListтАЩ ржПрж░ ржкрзНрж░ржзрж╛ржи рж╕ржжрж╕рзНржп ЁЯЩД",
  "рждрзБржЗ joke ржорж╛рж░рж┐рж╕, рждрж╛рждрзЗ рж╣рзЛржпрж╝рж╛ржЗржЯ рж╣рж╛ржЙрж╕рзЗ ржЬрж░рзБрж░рж┐ ржорж┐ржЯрж┐ржВ ржмрж╕рзЗ ЁЯд╖тАНтЩВя╕ПЁЯЗ║ЁЯЗ╕",
  "рждрзБржЗ ржкрзЗржЫржирзЗ ржжрж╛ржБрзЬрж╛рж▓рзЗржЗ рж╕рзЗрж▓ржлрж┐ ржХрзНржпрж╛ржорзЗрж░рж╛ ржзрзЛржБржпрж╝рж╛ ржЫрж╛рзЬрзЗ ЁЯУ╕ЁЯТи",
  "рждрзБржЗ ржорж╛ржирзЗ ржнрзБрж▓рзЗ ржпрж╛ржУржпрж╝рж╛ password-ржПрж░ embodiment ЁЯФСЁЯШ╡тАНЁЯТл",
  "рждрзБржЗ ржПржоржи ржмржжржорж╛ржЗрж╢, ржЬрж╛рж░ржЬрж░рж╛ржУ рждрзЛржХрзЗ тАШржирж╛ ржнрж╛ржЗ, ржЖржорж┐ ржнрж╛рж▓рзЛтАЩ ржмрж▓рзЗ ЁЯзм",
  "рждрзЛрж░ ржЪрж┐ржирзНрждрж╛ ржХрж░рждрзЗржЗ calculator ржЧрж░ржо рж╣рзЯрзЗ ржпрж╛рзЯ ЁЯФвЁЯФе",
  "рждрзБржЗ рж╣рж▓рж┐ walking nonsense тАУ ржерзЗржорзЗржУ ржмрзБржЭрзЗ ржирж╛ ЁЯдп",
  "рждрзЛрж░ ржоржд ржмрж▓ржжрзЗ ржмрзБржжрзНржзрж┐ ржжрж┐рж▓рзЗ ржнрзВрждржУ рж╣рзЛржБржЪржЯ ржЦрж╛ржпрж╝ ЁЯС╗",
  "рждрзЛрж░ profile ржжрзЗржЦрзЗ antivirus ржнрж╛ржЗрж░рж╛рж╕ ржзрж░рждрзЗ ржнрзБрж▓рзЗ ржпрж╛ржпрж╝ ЁЯШИЁЯжа",
  "рждрзБржЗ ржПржоржи ржбрж╛ржБрж╢, ржорж╢рж╛рж░рж╛ржУ рждрзЛрж░рзЗ bite ржХрж░рждрзЗ ржнрзЯ ржкрж╛рзЯ ЁЯжЯЁЯШ╖",
  "рждрзБржЗ рждрзЛ рж╢рж╛рж▓рж╛ ржПржоржи рж░рж╕рж┐ржХ, comedian рж░рж╛ рждрзЛржХрзЗ blacklist ржХрж░рзЗржЫрзЗ ЁЯШВЁЯУЭ",
  "рждрзЛрж░рзЗ ржжрзЗржЦрж▓рзЗ ржоржирзЗ рж╣рзЯ ржЬрзНржЮрж╛ржи ржЫрзБржЯрж┐рждрзЗ ржЧрзЗржЫрзЗ ЁЯМ┤ЁЯУЪ",
  "рждрзБржЗ ржПржоржи ржнрзЛржжрж╛ржЗ, spell check-ржУ рждрзЛржХрзЗ skip ржХрж░рзЗ ЁЯУЭЁЯЪл",
  "рждрзБржЗ ржирж┐ржЬрзЗржЗ ржПржХржЯрж╛ bug ЁЯРЫ, ржЖржкржбрзЗржЯрзЗржУ ржарж┐ржХ рж╣ржмрж┐ ржирж╛ ЁЯШй",
  "рждрзЛрж░рзЗ ржжрзЗржЦрзЗ ржоржирзЗ рж╣ржпрж╝ тАШbrain.exe has stopped workingтАЩ ЁЯТ╗тЭМ",
  "рждрзБржЗ ржПржоржи ржПржХржЯрж╛ ржмрж▓ржж, рждрзЛржХрзЗ ignore ржХрж░рж╛ржУ time waste ЁЯШм",
  "рждрзБржЗ joke ржорж╛рж░рж┐рж╕, рждрж╛рждрзЗ рж▓рзЛржХржЬржи ржЕржирж▓рж╛ржЗржи ржерзЗржХрзЗ ржЕржлрж▓рж╛ржЗржи рж╣рзЯрзЗ ржпрж╛ржпрж╝ ЁЯТА",
  "рждрзБржЗ ржПрждржЯрж╛ржЗ ржкрж╛ржЧрж▓, рждрзЛржХрзЗ ржмрж╛ржБржЪрж╛рждрзЗ asylum-ржУ deny ржХрж░рзЗ ЁЯПеЁЯЪ╖",
  "рждрзБржЗ ржПржоржи slow, рждрзЛрж░ ржЫрж╛ржпрж╝рж╛ржУ ржЖржЧрзЗ ржкрзМржБржЫрзЗ ржпрж╛ржпрж╝ ЁЯРвЁЯТи",
  "рждрзБржЗ ржПржоржи confused, mirror ржПржУ ржирж┐ржЬрзЗрж░рзЗ ржЪрж┐ржирж┐рж╕ ржирж╛ ЁЯкЮтЭУ",
  "рждрзБржЗ ржПржоржи annoying, mosquito coil рждрзЛржХрзЗ ржЫрзБржБрждрзЗ ржЪрж╛ржпрж╝ ржирж╛ ЁЯШТЁЯжЯ",
  "рждрзЛрж░ ржжрзГрж╖рзНржЯрж┐рждрзЗ ржПржд ржХрж╖рзНржЯ, рж▓рзЗржирзНрж╕ ржирж┐ржЬрзЗржЗ ржлрзЗржЯрзЗ ржпрж╛ржпрж╝ ЁЯСУЁЯТФ",
  "рждрзБржЗ joke ржХрж░рж▓рзЗржЗ ChatGPT log out ржХрж░рзЗ ЁЯдЦЁЯЪк",
  "рждрзЛрж░ IQ ржПржд ржХржо, рждрзЛрж░рзЗ ржжрзЗржЦрзЗ 0-ржУ superior ржоржирзЗ рж╣ржпрж╝ 0я╕ПтГг",
  "рждрзБржЗ рж╣ржЗржЫрж┐рж╕ live example тАУ тАШhow not to existтАЩ ЁЯзНЁЯЪл",
  "рждрзЛрж░рзЗ ржХрж╛ржирзЗ рж╢рзБржирж▓рзЗ speaker ржмрзНрж▓ржХ рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ ЁЯФЗ",
  "рждрзБржЗ ржПржХржорж╛рждрзНрж░ ржорж╛ржирзБрж╖, ржпрж╛рж░рзЗ troll ржХрж░рзЗржУ troll ржорж╛ржл ржЪрж╛рзЯ ЁЯШн",
  "рждрзБржЗ ржкрж┐ржХ ржжрж┐рж▓рзЗ screen protector ржирж┐ржЬрзЗржЗ ржЙржарж┐ржпрж╝рзЗ ржирзЗрзЯ ЁЯУ▒ЁЯШ╡тАНЁЯТл",
  "рждрзБржЗ ржПржоржи face, ржпрж╛рж░рзЗ ржжрзЗржЦрзЗ ghost ржмрж▓рзЗ тАУ ржжрзЛрж╕рзНржд, ржнрзЯ ржкрж╛ржЗ ЁЯШиЁЯС╗",
];
    const insult = insults[Math.floor(Math.random() * insults.length)];
    return api.sendMessage(insult, event.threadID, event.messageID);
  }
};
